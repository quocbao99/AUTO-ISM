"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[424],{64489:function(e,n,t){t.d(n,{Z:function(){return P}});var i=t(87462),s=t(63366),l=t(67294),a=(t(59864),t(86010)),r=t(93427),o=t(67074),c=t(6446),d=t(29630),h=t(41796),x=t(58175),u=t(85893),p=(0,x.Z)((0,u.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),g=t(50522);const m=(0,o.ZP)(g.Z)((({theme:e})=>(0,i.Z)({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`},"light"===e.palette.mode?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,i.Z)({},"light"===e.palette.mode?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}),"&:active":(0,i.Z)({boxShadow:e.shadows[0]},"light"===e.palette.mode?{backgroundColor:(0,h._4)(e.palette.grey[200],.12)}:{backgroundColor:(0,h._4)(e.palette.grey[600],.12)})}))),j=(0,o.ZP)(p)({width:24,height:16});var Z=function(e){const n=e;return(0,u.jsx)("li",{children:(0,u.jsx)(m,(0,i.Z)({focusRipple:!0},e,{ownerState:n,children:(0,u.jsx)(j,{ownerState:n})}))})},f=t(45154),v=t(22104);function b(e){return(0,v.Z)("MuiBreadcrumbs",e)}var y=(0,f.Z)("MuiBreadcrumbs",["root","ol","li","separator"]);const C=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],I=(0,o.ZP)(d.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,n)=>[{[`& .${y.li}`]:n.li},n.root]})({}),w=(0,o.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,n)=>n.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),S=(0,o.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,n)=>n.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function k(e,n,t,i){return e.reduce(((s,l,a)=>(a<e.length-1?s=s.concat(l,(0,u.jsx)(S,{"aria-hidden":!0,className:n,ownerState:i,children:t},`separator-${a}`)):s.push(l),s)),[])}var P=l.forwardRef((function(e,n){const t=(0,c.Z)({props:e,name:"MuiBreadcrumbs"}),{children:o,className:d,component:h="nav",expandText:x="Show path",itemsAfterCollapse:p=1,itemsBeforeCollapse:g=1,maxItems:m=8,separator:j="/"}=t,f=(0,s.Z)(t,C),[v,y]=l.useState(!1),S=(0,i.Z)({},t,{component:h,expanded:v,expandText:x,itemsAfterCollapse:p,itemsBeforeCollapse:g,maxItems:m,separator:j}),P=(e=>{const{classes:n}=e;return(0,r.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},b,n)})(S),N=l.useRef(null),T=l.Children.toArray(o).filter((e=>l.isValidElement(e))).map(((e,n)=>(0,u.jsx)("li",{className:P.li,children:e},`child-${n}`)));return(0,u.jsx)(I,(0,i.Z)({ref:n,component:h,color:"text.secondary",className:(0,a.Z)(P.root,d),ownerState:S},f,{children:(0,u.jsx)(w,{className:P.ol,ref:N,ownerState:S,children:k(v||m&&T.length<=m?T:(e=>g+p>=e.length?e:[...e.slice(0,g),(0,u.jsx)(Z,{"aria-label":x,onClick:()=>{y(!0);const e=N.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-p,e.length)])(T),P.separator,j,S)})}))}))},66424:function(e,n,t){t.d(n,{ak:function(){return re},i6:function(){return F}});var i=t(85893),s=t(62097),l=t(29630),a=t(17575),r=t(80562),o=t(79072),c=t(91655),d=t(30120),h=t(91359),x=t(9144),u=t(70918),p=t(75158),g=t(26993),m=t(9041),j=t(65828),Z=t(88767),f=t(73762),v=t(76429),b=t(11163),y=t(67294),C=t(87536),I=t(66338),w=t(51593),S=t(51482),k=t(37024),P=t(53073),N=t(21977),T=t(13136),D=t(69647),H=t(44373),O=t(62026),R=t(47533),q=t(31812),M=t(74231),L=t(2676);const A=e=>{let{isOpen:n,onClose:t,isUpdate:l,dataUpdate:a}=e;var r;(0,b.useRouter)();const c=(0,Z.useQueryClient)(),x=(0,s.Z)(),u=M.Ry().shape({marketID:M.Z_().required("Th\u1ecb tr\u01b0\u1eddng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),name:M.Z_().required("T\xean th\u01b0\u01a1ng hi\u1ec7u kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),code:M.Z_().required("M\xe3 th\u01b0\u01a1ng hi\u1ec7u kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}),p=(0,C.cI)({defaultValues:{marketID:"",name:"",code:"",icon:""},resolver:(0,R.X)(u)}),m=p.watch();(0,y.useEffect)((()=>{l&&a?p.reset(a,{keepDefaultValues:!0}):p.reset()}),[n]);const j=(0,Z.useMutation)(w.Dd.create,{onSuccess:e=>{c.invalidateQueries("brand"),t(),p.reset(),N.dN.success("Th\xeam m\u1edbi th\u01b0\u01a1ng hi\u1ec7u th\xe0nh c\xf4ng")},onError:e=>{N.dN.error(e.response.data.resultMessage)}}),f=(0,Z.useMutation)(w.Dd.update,{onSuccess:e=>{c.invalidateQueries("brand"),t(),p.reset(),N.dN.success("C\u1eadp nh\u1eadt th\u01b0\u01a1ng hi\u1ec7u th\xe0nh c\xf4ng")}}),I=(0,L.g7)(),k=(0,Z.useMutation)(w.aq.upload);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(T.hw,{isOpen:n,onClose:()=>{p.reset(),t()},maxWidth:"md",title:l?"CH\u1ec8NH S\u1eecA TH\u01af\u01a0NG HI\u1ec6U":"T\u1ea0O M\u1edaI TH\u01af\u01a0NG HI\u1ec6U",children:(0,i.jsx)(C.RV,{...p,children:(0,i.jsxs)("form",{onSubmit:p.handleSubmit((e=>{l?f.mutateAsync(e):j.mutateAsync(e)}),(e=>{console.log(e),console.log(p.formState)})),children:[(0,i.jsx)(h.Z,{children:(0,i.jsxs)(o.ZP,{item:!0,container:!0,sx:{},spacing:"27px",children:[(0,i.jsxs)(o.ZP,{container:!0,item:!0,xs:12,md:7,spacing:"27px",children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(v.o,{options:(null===(r=I.data)||void 0===r?void 0:r.items)||[],getOptionLabel:e=>e.code,getOptionValue:e=>e.id,control:p.control,name:"marketID",label:"TH\u1eca TR\u01af\u1edcNG",required:!0,labelSx:{whiteSpace:"nowrap"}})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(v.qR,{control:p.control,name:"code",label:"M\xc3 TH\u01af\u01a0NG HI\u1ec6U",required:!0,labelSx:{whiteSpace:"nowrap"}})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(v.qR,{control:p.control,name:"name",label:"T\xcaN TH\u01af\u01a0NG HI\u1ec6U",required:!0,labelSx:{whiteSpace:"nowrap"}})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(v.qR,{control:p.control,name:"description",label:"GHI CH\xda",labelSx:{whiteSpace:"nowrap"}})})]}),(0,i.jsx)(o.ZP,{container:!0,item:!0,xs:12,md:5,children:(0,i.jsxs)(d.Z,{className:"mt-[27px] flex flex-col gap-[27px] min-w-[200px] mx-auto items-center",children:[(0,i.jsx)(D.Z,{component:"img",className:"rounded-md",sx:{height:150,minWidth:150,objectFit:"contain"},image:m.icon?m.icon:"https://via.placeholder.com/150",title:"green iguana"}),(0,i.jsxs)("label",{htmlFor:"update_avatar",children:[(0,i.jsx)("input",{type:"file",accept:"image/*",id:"update_avatar",style:{display:"none"},onChange:async e=>{console.log(e.currentTarget.files[0]);await k.mutateAsync(e.currentTarget.files[0],{onSuccess:e=>{e&&p.setValue("icon",e.fileUrl)},onError:e=>{console.log(e)}})}}),(0,i.jsx)(q.Z,{size:"large",startIcon:(0,i.jsx)(S.eD,{}),sx:{gap:"6px",fill:x.palette.primary.dark,padding:"14px 42px",color:x.palette.primary.dark},variant:"outlined",component:"span",children:"Ch\u1ecdn \u1ea3nh"})]})]})})]})}),(0,i.jsx)(H.Z,{}),(0,i.jsxs)(O.Z,{sx:{justifyContent:"flex-end"},children:[(0,i.jsx)(g.Z,{type:"button",variant:"text",onClick:()=>{t()},children:"\u0110\xf3ng"}),(0,i.jsx)(q.Z,{variant:"contained",loading:!1,type:"submit",children:"T\u1ea1o"})]})]})})})})},F=e=>{let{}=e;const n=(0,s.Z)(),t=(0,b.useRouter)(),f=(0,Z.useQueryClient)(),D=(0,k.q)(),H=(0,k.q)(),O=(0,I.v9)((e=>e.menuControl.iconSideBarOpened)),[R,q]=(0,y.useState)([]),[M,F]=(0,y.useState)((()=>localStorage.getItem("brandLayout")?String(localStorage.getItem("brandLayout")):"lists")),z=(0,y.useRef)([]),Q=(0,y.useRef)(null),B=(0,C.cI)({defaultValues:{pageSize:10,pageIndex:1,searchContent:"",marketID:""}}),W=B.watch(),V=e=>{B.reset({...e,marketID:W.marketID})};(0,y.useEffect)((()=>{q([])}),[W.marketID,W.pageIndex,W.pageSize,W.searchContent]);const{data:E,isLoading:U,isFetching:X}=(0,Z.useQuery)(["brand",W.marketID,W.pageIndex,W.pageSize,W.searchContent],(()=>w.Dd.getAll({...W})),{enabled:!0,onError:e=>{},onSuccess:e=>{"cards"==M&&!e.data.items.length&&((null===W||void 0===W?void 0:W.pageIndex)||0)>1&&B.setValue("pageIndex",1),q([])},refetchOnWindowFocus:!1,keepPreviousData:!0}),_=(0,y.useMemo)((()=>(null===E||void 0===E?void 0:E.data.items)||[]),[null===E||void 0===E?void 0:E.data]),G=(0,L.g7)(),$=(0,y.useMemo)((()=>[{Header:"Code",accessor:"code",sticky:"left",minWidth:150},{Header:"T\xean th\u01b0\u01a1ng hi\u1ec7u",accessor:"name",minWidth:250},{Header:"Th\u1ecb tr\u01b0\u1eddng",accessor:"marketID",Cell:e=>{let{value:n}=e;var t,s;return(0,i.jsx)(l.Z,{children:null===(s=null===(t=G.data)||void 0===t?void 0:t.items.find((e=>e.id==n)))||void 0===s?void 0:s.name})}},{Header:"H\xe0nh \u0111\u1ed9ng ",accessor:"id",align:"center",minWidth:150,Cell:e=>{let{row:s}=e;return(0,i.jsx)(a.Z,{title:"\u0110i t\u1edbi chi ti\u1ebft th\u01b0\u01a1ng hi\u1ec7u",children:(0,i.jsx)(r.Z,{sx:{" svg":{width:"20px",height:"20px"},fill:n.palette.primary.main},onClick:()=>{t.push({pathname:"/brands/detail",query:{brandId:s.original.id}})},children:(0,i.jsx)(S.Nw,{})})})}}]),[G.data]),J=(0,Z.useMutation)((e=>Promise.all(e.map((e=>w.Dd.delete(e))))),{onSuccess:e=>{f.invalidateQueries("brand"),H.onClose(),N.dN.success("X\xf3a th\xe0nh c\xf4ng")},onError:e=>{N.dN.error(e)}}),K=e=>{const n=R.indexOf(e);let t=[];-1===n?t=t.concat(R,e):0===n?t=t.concat(R.slice(1)):n===R.length-1?t=t.concat(R.slice(0,-1)):n>0&&(t=t.concat(R.slice(0,n),R.slice(n+1))),q(t)},Y=e=>{if(e.target.checked){const e=null===_||void 0===_?void 0:_.map((e=>e.id));q(e)}else q([])},ee=()=>U?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:O?4:6,lg:O?3:4,xl:3,children:(0,i.jsx)(c.Z,{variant:"rectangular",width:"100%",height:150})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:O?4:6,lg:O?3:4,xl:3,children:(0,i.jsx)(c.Z,{variant:"rectangular",width:"100%",height:150})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:O?4:6,lg:O?3:4,xl:3,children:(0,i.jsx)(c.Z,{variant:"rectangular",width:"100%",height:150})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:O?4:6,lg:O?3:4,xl:3,children:(0,i.jsx)(c.Z,{variant:"rectangular",width:"100%",height:150})})]}):(0,i.jsx)(i.Fragment,{children:_.length?_.map(((e,n)=>{const t=(s=e.id,-1!==R.indexOf(s));var s;return(0,i.jsx)(o.ZP,{sx:{height:"auto"},item:!0,xs:12,sm:6,md:O?4:6,lg:O?3:4,xl:3,children:(0,i.jsx)(d.Z,{sx:{height:"100%"},children:(0,i.jsx)(T.EJ,{data:e,handleSelect:K,checked:t})})},"brandCard-".concat(e.id))})):(0,i.jsx)(v.AX,{sx:{marginLeft:"27px",marginTop:"27px",width:"100%"},children:(0,i.jsx)(h.Z,{className:"w-full ",children:(0,i.jsxs)(x.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:2,py:2,children:[(0,i.jsx)(v.Jd,{fill:"grey",width:128,height:128}),(0,i.jsx)(l.Z,{variant:"body2",color:"grey",children:"Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin"})]})})})});return(0,i.jsxs)(d.Z,{ref:Q,children:[(0,i.jsxs)(C.RV,{...B,children:[(0,i.jsxs)("div",{className:"mb-[36px] flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(l.Z,{variant:"largeTitle",children:"Qu\u1ea3n l\xfd th\u01b0\u01a1ng hi\u1ec7u"}),(0,i.jsx)(l.Z,{children:"T\u1ea5t c\u1ea3 th\xf4ng tin li\xean quan \u0111\u1ebfn th\u01b0\u01a1ng hi\u1ec7u \u0111\u01b0\u1ee3c qu\u1ea3n l\xfd t\u1eeb trang n\xe0y"})]}),(0,i.jsx)(P.HS,{title:"T\u1ea1o m\u1edbi th\u01b0\u01a1ng hi\u1ec7u",handleFunction:D.onOpen})]}),(0,i.jsxs)(d.Z,{className:"mb-[36px] flex justify-between items-center",children:[(0,i.jsx)(d.Z,{className:"h-full",children:(0,i.jsx)(T.oL,{})}),(0,i.jsx)(d.Z,{children:(0,i.jsx)(T.Mf,{layout:M,handleSetLayout:e=>{F(e),localStorage.setItem("brandLayout",e)}})})]}),"cards"==M?(0,i.jsx)(v.h2,{in:!0,type:"slide",direction:"left",timeout:2e3,container:Q.current,children:(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(u.Z,{sx:{mb:"27px"},children:(0,i.jsx)(h.Z,{sx:{padding:"18px !important"},children:(0,i.jsxs)(x.Z,{sx:{width:"100%"},direction:"row",spacing:1,alignItems:"center",justifyContent:"end",children:[(0,i.jsx)(d.Z,{children:(0,i.jsx)(a.Z,{title:"Ch\u1ecdn t\u1ea5t c\u1ea3 trong trang",children:(0,i.jsx)(p.Z,{onChange:Y,indeterminate:R.length>0&&R.length<_.length,checked:_.length>0&&R.length===_.length})})}),(0,i.jsx)(d.Z,{className:"flex-1",children:R.length?(0,i.jsxs)(d.Z,{className:"flex items-center gap-[27px]",children:[(0,i.jsxs)(l.Z,{fontWeight:600,children:["\u0110\xe3 ch\u1ecdn ",R.length]}),(0,i.jsx)("div",{children:(0,i.jsx)(g.Z,{onClick:()=>{H.onOpen()},color:"error",children:"Delete"})})]}):(0,i.jsx)(v.qR,{control:B.control,name:"searchContent",placeholder:"T\xecm ki\u1ebfm...",size:"small",InputProps:{startAdornment:(0,i.jsx)(m.Z,{position:"end",children:(0,i.jsx)(S.W1,{})})},sx:{"& .MuiOutlinedInput-input":{fontWeight:600,marginLeft:"16px"}}})}),R.length?null:(0,i.jsx)(P.Pi,{onClick1:()=>{B.reset({pageIndex:1,pageSize:W.pageSize,searchContent:"",marketID:W.marketID})},title:"T\u1ea3i l\u1ea1i",sx:{},component:"span",children:(0,i.jsx)(S.Du,{})})]})})}),(0,i.jsx)(o.ZP,{container:!0,spacing:"24px",children:ee()}),(0,i.jsx)(u.Z,{sx:{marginTop:"27px"},children:(0,i.jsx)(h.Z,{sx:{padding:"18px !important"},children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(j.Z,{rowsPerPageOptions:[2,5,10,25,50],component:"div",count:(null===E||void 0===E?void 0:E.data.totalItem)||0,size:"small",page:(null===W||void 0===W?void 0:W.pageIndex)?W.pageIndex-1:0,onPageChange:(e,n)=>{B.setValue("pageIndex",n+1)},labelRowsPerPage:"S\u1ed1 d\xf2ng m\u1ed7i trang",labelDisplayedRows:e=>{let{from:n,to:t,count:s,page:l}=e;return(0,i.jsx)("p",{children:"".concat(n,"\u2013").concat(t," c\u1ee7a ").concat(-1!==s?s:"nhi\u1ec1u h\u01a1n ".concat(t))})},rowsPerPage:W.pageSize||0,onRowsPerPageChange:e=>{B.setValue("pageSize",parseInt(e.target.value))}})})})})]})}):(0,i.jsx)(v.h2,{in:!0,type:"slide",direction:"left",timeout:2e3,container:Q.current,children:(0,i.jsx)(v.ZD,{viewProps:{},data:_,totalRows:(null===E||void 0===E?void 0:E.data.totalItem)||0,totalPage:(null===E||void 0===E?void 0:E.data.totalPage)||0,multiSelectAction:e=>(0,i.jsx)("div",{children:(0,i.jsx)(g.Z,{onClick:()=>{z.current=e,H.onOpen()},color:"error",children:"Delete"})}),tableOptions:{columns:$},onRefetchQuery:()=>{},isToggleHiddenColumn:!0,tablePlugins:["globalFilter","pagination","rowSelect"],searchState:W,setNewState:V,isLoading:U||X})})]}),(0,i.jsx)(A,{isOpen:D.isOpen,onClose:D.onClose,dataUpdate:null}),(0,i.jsx)(T.AN,{handleFunction:()=>{var e;"cards"==M?J.mutateAsync(R):J.mutateAsync(null===(e=z.current)||void 0===e?void 0:e.map((e=>e.id)))},title:"X\xd3A TH\u01af\u01a0NG HI\u1ec6U",content:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a c\xe1c th\u01b0\u01a1ng hi\u1ec7u \u0111\xe3 ch\u1ecdn? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c \u0111\u01b0\u1ee3c",isOpen:H.isOpen,onClose:H.onClose})]})};F.title="Qu\u1ea3n l\xfd th\u01b0\u01a1ng hi\u1ec7u",F.getLayout=e=>(0,i.jsx)(f.Z,{children:e});var z=t(61225),Q=t(64489),B=t(25675),W=t.n(B),V=t(41664),E=t.n(V),U=t(63225),X=t(86777),_=t(90244),G=t(93978),$=t(69417),J=t(5605),K=t(39807),Y=t(93481),ee=t(22841),ne=t(54181),te=t(56077),ie=t(43170);const se=e=>{let{dataModel:n}=e;const t=(0,b.useRouter)(),o=(0,Z.useQueryClient)(),c=(0,s.Z)(),h=(0,k.q)(),x=t.query.brandId,[u,p]=(0,y.useState)(null),{data:g}=(0,Z.useQuery)(["lineoffQuery",n.id],(()=>w.TZ.getAll({emodelID:n.id,pageIndex:1,pageSize:100})),{keepPreviousData:!0}),m=(0,Z.useMutation)((e=>Promise.all(e.map((e=>w.TZ.delete(e))))),{onSuccess:e=>{o.invalidateQueries(["lineoffQuery",n.id]),h.onClose(),N.dN.success("X\xf3a th\xe0nh c\xf4ng")},onError:e=>{N.dN.error(e)}}),j=(0,y.useCallback)(((e,n)=>e.year>n.year?1:e.year<n.year?-1:0),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{children:(0,i.jsx)(X.Z,{sx:{py:0,maxHeight:"calc(100vh - 165px)"},children:(0,i.jsxs)(_.Z,{size:"small",children:[(0,i.jsx)(G.Z,{children:(0,i.jsxs)($.Z,{children:[(0,i.jsx)(J.Z,{children:"N\u0103m c\u1ea5u h\xecnh g\xf3i"}),(0,i.jsx)(J.Z,{children:"Ti\xeau \u0111\u1ec1"}),(0,i.jsx)(J.Z,{width:150,align:"center",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,i.jsx)(K.Z,{children:(null===g||void 0===g?void 0:g.data.items.length)?g.data.items.sort(j).map(((e,s)=>(0,i.jsxs)($.Z,{children:[(0,i.jsx)(J.Z,{children:e.year}),(0,i.jsx)(J.Z,{children:e.name}),(0,i.jsxs)(J.Z,{children:[" ",(0,i.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"center"},children:[(0,i.jsx)(a.Z,{title:"\u0110i t\u1edbi chi ti\u1ebft line-off",children:(0,i.jsx)(r.Z,{sx:{fill:"rgb(84 51 34 / 70%)",":hover":{bgcolor:c.palette.background.default}},onClick:()=>{t.push({pathname:"/brands/detail/model/lineoff",query:{brandId:x,modelId:n.id,lineoffId:e.id}})},children:(0,i.jsx)(S.Nw,{})})}),(0,i.jsx)(a.Z,{title:"X\xf3a",children:(0,i.jsx)(r.Z,{onClick:()=>{p(e),h.onOpen()},sx:{fill:"rgb(255, 25, 67)"},children:(0,i.jsx)(S.jW,{})})})]})]})]},"talbe-lineoff-row-".concat(s)))):(0,i.jsx)($.Z,{children:(0,i.jsx)(J.Z,{sx:{p:"27px"},colSpan:3,children:(0,i.jsx)(l.Z,{fontWeight:"bold",children:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u"})})})})]})})}),(0,i.jsx)(T.AN,{handleFunction:()=>{u&&m.mutateAsync([null===u||void 0===u?void 0:u.id])},title:"X\xd3A D\u1eee LI\u1ec6U",content:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a c\xe1c d\xf2ng xe \u0111\xe3 ch\u1ecdn? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c \u0111\u01b0\u1ee3c",isOpen:h.isOpen,onClose:h.onClose,isLoading:m.isLoading})]})},le=e=>{let{dataModel:n}=e;const t=(0,k.q)();return(0,i.jsxs)(d.Z,{sx:{bgcolor:"#FFF"},children:[(0,i.jsx)(d.Z,{children:(0,i.jsx)(se,{dataModel:n})}),(0,i.jsx)(d.Z,{sx:{p:"12px"},children:(0,i.jsx)(g.Z,{onClick:()=>{t.onOpen()},sx:{"& .MuiButton-startIcon":{fill:"#ef5d22"}},size:"small",variant:"outlined",startIcon:(0,i.jsx)(S.qJ,{}),children:"T\u1ea1o m\u1edbi line-off"})}),(0,i.jsx)(T.H$,{isOpen:t.isOpen,onClose:t.onClose,dataUpdate:null,eModelID:n.id})]})},ae=e=>{let{brandID:n}=e;const t=(0,b.useRouter)(),o=(0,s.Z)(),c=(0,Z.useQueryClient)(),h=(0,k.q)(),u=(0,k.q)(),[p,g]=(0,y.useState)(null),[f,I]=(0,y.useState)(!1),[P,D]=(0,y.useState)(null),H=(0,y.useRef)(null),O=(0,y.useRef)(null),R=(0,C.cI)({defaultValues:{pageSize:10,pageIndex:1,searchContent:""}}),q=R.watch(),{data:M,isLoading:L,isFetching:A}=(0,Z.useQuery)(["modelsOfBrand",n,q.pageIndex,q.pageSize,q.searchContent],(()=>{var e;return n?w.Lf.getAll({...q,searchContent:null===(e=q.searchContent)||void 0===e?void 0:e.trim(),brandID:n}):void 0}),{enabled:!!n,onSettled:()=>{g(null)},refetchOnWindowFocus:!1,keepPreviousData:!0}),F=(0,y.useMemo)((()=>(null===M||void 0===M?void 0:M.data)?M.data.items:[]),[M]),z=(0,Z.useMutation)((e=>Promise.all(e.map((e=>w.Lf.delete(e))))),{onSuccess:e=>{c.invalidateQueries(["modelsOfBrand",n]),u.onClose(),N.dN.success("X\xf3a th\xe0nh c\xf4ng")},onError:e=>{N.dN.error(e)}});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(d.Z,{className:"",children:(0,i.jsxs)(v.AX,{title:"QU\u1ea2N L\xdd D\xd2NG XE",darkTitle:!0,secondary:(0,i.jsx)(v.HS,{title:"T\u1ea1o m\u1edbi d\xf2ng xe",handleFunction:h.onOpen}),children:[(0,i.jsx)(d.Z,{className:"flex gap-2 p-[18px]",children:(0,i.jsxs)(x.Z,{sx:{width:"100%"},direction:"row",spacing:1,alignItems:"center",justifyContent:"end",children:[(0,i.jsx)(U.Z,{inputRef:H,placeholder:"T\xecm ki\u1ebfm...",size:"small",InputProps:{startAdornment:(0,i.jsx)(m.Z,{position:"end",children:(0,i.jsx)(S.W1,{})})},sx:{flex:1,"& .MuiOutlinedInput-root":{height:"40px"},"& .MuiOutlinedInput-input":{fontWeight:600,marginLeft:"16px"}},onChange:e=>{var n;n=e.target.value,O.current&&clearTimeout(O.current),O.current=setTimeout((()=>{R.setValue("searchContent",n)}),800)}}),(0,i.jsx)(v.Pi,{onClick1:()=>{R.reset({searchContent:"",pageIndex:1,pageSize:q.pageSize}),H.current.value=""},title:"T\u1ea3i l\u1ea1i",component:"span",disabled:L||A,children:(0,i.jsx)(S.Du,{})})]})}),(0,i.jsx)(X.Z,{sx:{py:0,maxHeight:"calc(100vh - 165px)"},children:(0,i.jsxs)(_.Z,{size:f?"small":"medium",children:[(0,i.jsx)(G.Z,{children:(0,i.jsxs)($.Z,{children:[(0,i.jsx)(J.Z,{padding:"checkbox"}),(0,i.jsx)(J.Z,{children:"T\xean d\xf2ng xe"}),(0,i.jsx)(J.Z,{children:"Lo\u1ea1i"}),(0,i.jsx)(J.Z,{width:150,align:"center",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,i.jsx)(K.Z,{children:L||A?(0,i.jsx)(i.Fragment,{children:(0,te.ow)(3).map(((e,n)=>(0,i.jsx)(ie.tv,{columns:4},n)))}):F.length?F.map(((e,s)=>{const c=e.id==p;return(0,i.jsxs)(y.Fragment,{children:[(0,i.jsxs)($.Z,{selected:c,sx:{"& .MuiTableCell-root":{border:"none"}},children:[(0,i.jsx)(J.Z,{padding:"checkbox",align:"center",children:(0,i.jsx)(r.Z,{sx:{stroke:o.palette.text.primary,height:"28px",width:"28px"," svg":{transform:c?"rotate(-180deg)":"rotate(0)"}},onClick:()=>{e.id==p?g(null):g(e.id)},children:(0,i.jsx)(S.hW,{})})}),(0,i.jsx)(J.Z,{children:e.name}),(0,i.jsx)(J.Z,{children:1==e.emodelType?"Car & Light Truck":"Heavy Truck & Heavy Equipment"}),(0,i.jsx)(J.Z,{children:(0,i.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"center"},children:[(0,i.jsx)(a.Z,{title:"\u0110i t\u1edbi chi ti\u1ebft d\xf2ng xe",children:(0,i.jsx)(r.Z,{sx:{fill:"rgb(84 51 34 / 70%)",":hover":{bgcolor:o.palette.background.default}},onClick:()=>{t.push({pathname:"/brands/detail/model",query:{brandId:n,modelId:e.id}})},children:(0,i.jsx)(S.Nw,{})})}),(0,i.jsx)(a.Z,{title:"X\xf3a",children:(0,i.jsx)(r.Z,{onClick:()=>{D(e),u.onOpen()},sx:{fill:"red"},children:(0,i.jsx)(S.jW,{})})})]})})]},"models_row-".concat(s)),(0,i.jsx)($.Z,{sx:{" :hover":{bgcolor:"transparent"}},children:(0,i.jsx)(J.Z,{style:{padding:0},colSpan:4,children:(0,i.jsx)(Y.Z,{in:c,timeout:"auto",unmountOnExit:!0,children:(0,i.jsxs)(d.Z,{sx:{padding:1,width:"100%",height:"100%",p:"27px",backgroundColor:"#f6a07d"},children:[(0,i.jsx)(l.Z,{color:"#FFF",variant:"h3",sx:{pb:"16px"},children:"Line-offs"}),(0,i.jsx)(le,{dataModel:e})]})})})})]},"models-fragment-".concat(s))})):(0,i.jsx)($.Z,{sx:{":hover":{background:"transparent"}},children:(0,i.jsx)(J.Z,{colSpan:4,children:(0,i.jsxs)(x.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:2,py:2,children:[(0,i.jsx)(v.Jd,{fill:"grey",width:128,height:128}),(0,i.jsx)(l.Z,{variant:"body2",color:"grey",children:"Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin"})]})})})})]})}),(0,i.jsxs)(d.Z,{className:"flex justify-between items-center py-[8px]",children:[(0,i.jsx)(d.Z,{className:"pl-4 h-full bg-color-[red]",children:(0,i.jsx)(ee.Z,{control:(0,i.jsx)(ne.Z,{checked:f,onChange:e=>{I(e.target.checked)}}),label:"G\xf3c nh\xecn h\u1eb9p"})}),(0,i.jsx)(j.Z,{rowsPerPageOptions:[2,5,10,25,50],component:"div",count:(null===M||void 0===M?void 0:M.data.totalItem)||0,size:"small",page:(null===q||void 0===q?void 0:q.pageIndex)?q.pageIndex-1:0,onPageChange:(e,n)=>{R.setValue("pageIndex",n+1)},labelRowsPerPage:"S\u1ed1 d\xf2ng m\u1ed7i trang",labelDisplayedRows:e=>{let{from:n,to:t,count:s,page:l}=e;return(0,i.jsx)("p",{children:"".concat(n,"\u2013").concat(t," c\u1ee7a ").concat(-1!==s?s:"nhi\u1ec1u h\u01a1n ".concat(t))})},rowsPerPage:q.pageSize||0,onRowsPerPageChange:e=>{R.setValue("pageSize",parseInt(e.target.value))}})]})]})}),(0,i.jsx)(T.yY,{dataUpdate:null,brandID:n,onClose:h.onClose,isOpen:h.isOpen}),(0,i.jsx)(T.AN,{handleFunction:()=>{P&&z.mutateAsync([null===P||void 0===P?void 0:P.id])},title:"X\xd3A D\u1eee LI\u1ec6U",content:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a c\xe1c d\xf2ng xe \u0111\xe3 ch\u1ecdn? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c \u0111\u01b0\u1ee3c",isOpen:u.isOpen,onClose:u.onClose,isLoading:z.isLoading})]})})},re=e=>{let{}=e;var n;const t=(0,b.useRouter)(),a=(0,Z.useQueryClient)(),r=((0,k.q)(),(0,s.Z)()),c=(0,z.Z)(r.breakpoints.down("md")),h=t.query.brandId,[x,u]=(0,y.useState)("dtc"),p=((0,y.useCallback)((e=>{u(e)}),[]),(0,C.cI)({defaultValues:{id:"",marketID:"",code:"",name:"",icon:""}})),g=p.watch(),{data:m,isFetched:j}=(0,Z.useQuery)(["brandDetail",h],(()=>h?w.Dd.getById(h):void 0),{enabled:!!h,refetchOnWindowFocus:!1});(0,y.useEffect)((()=>{(null===m||void 0===m?void 0:m.data)&&p.reset(m.data)}),[j]);const f=(0,L.g7)(),I=(0,Z.useMutation)(w.Dd.update,{onSuccess:e=>{a.invalidateQueries("brand"),N.dN.success("C\u1eadp nh\u1eadt th\u01b0\u01a1ng hi\u1ec7u th\xe0nh c\xf4ng")}}),P=(0,Z.useMutation)(w.aq.upload);return(0,i.jsx)(d.Z,{children:(0,i.jsx)(o.ZP,{container:!0,spacing:"27px",children:(0,i.jsx)(o.ZP,{item:!0,xs:12,lg:12,children:(0,i.jsx)(d.Z,{sx:{width:"100%",display:"flex"},children:(0,i.jsxs)(d.Z,{sx:{minHeight:"calc(100vh - 300px)",width:"100%",maxWidth:"1226px",margin:"0 auto"},children:[(0,i.jsxs)(d.Z,{className:"flex items-center",children:[(0,i.jsx)(v.qI,{title:"Tr\u1edf l\u1ea1i",onClick1:()=>{t.push("/brands")},sx:{marginRight:"18px"},children:(0,i.jsx)(S.Ii,{})}),(0,i.jsxs)(d.Z,{sx:{flex:1},children:[(0,i.jsx)(l.Z,{variant:"largeTitle",children:null===m||void 0===m?void 0:m.data.name}),(0,i.jsx)(d.Z,{children:(0,i.jsxs)(Q.Z,{maxItems:2,"aria-label":"breadcrumb",children:[(0,i.jsx)(E(),{href:"/",passHref:!0,children:"Home"}),(0,i.jsx)(E(),{href:"/brands",passHref:!0,children:"Brands"}),(0,i.jsxs)(l.Z,{color:"text.dark",children:["Brand ",null===m||void 0===m?void 0:m.data.code]})]})})]})]}),(0,i.jsx)(v.AX,{sx:{mt:"36px"},children:(0,i.jsx)("form",{onSubmit:p.handleSubmit((e=>{I.mutateAsync(e)}),(e=>{(0,N.lQ)(e)})),children:(0,i.jsx)(d.Z,{children:(0,i.jsxs)(o.ZP,{container:!0,sx:{},children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,md:4,sx:{borderRight:c?"":"thin solid rgba(0, 0, 0, 0.12)",p:"27px"},children:(0,i.jsxs)(d.Z,{className:"flex flex-col items-center",sx:{height:"100%"},children:[(0,i.jsx)(d.Z,{sx:{position:"relative",width:"100%",height:"100%",minHeight:"180px"," img":{objectFit:"contain"},mb:"16px"},children:(0,i.jsx)(W(),{fill:!0,src:g.icon||"https://via.placeholder.com/150",alt:"brand-image"})}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:async e=>{console.log(e),console.log(e.currentTarget.files[0]);await P.mutateAsync(e.currentTarget.files[0],{onSuccess:e=>{e&&p.setValue("icon",e.fileUrl,{shouldDirty:!0})},onError:e=>{console.log(e)}})}}),(0,i.jsx)(q.Z,{size:"large",startIcon:(0,i.jsx)(S.eD,{}),sx:{bgcolor:"#f385591a",gap:"6px",fill:r.palette.primary.dark,padding:"14px 42px",color:r.palette.primary.dark},variant:"text",component:"span",loading:P.isLoading,children:"Ch\u1ecdn \u1ea3nh"})]})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:8,sx:{p:"27px"},children:(0,i.jsxs)(d.Z,{className:" h-full",children:[(0,i.jsx)(l.Z,{variant:"h3",sx:{opacity:.4},children:"TH\xd4NG TIN CHI TI\u1ebeT"}),(0,i.jsx)(d.Z,{children:(0,i.jsx)(l.Z,{})}),(0,i.jsxs)(d.Z,{className:"flex flex-col gap-[27px] mt-[27px]",children:[(0,i.jsx)(d.Z,{children:(0,i.jsxs)(o.ZP,{container:!0,spacing:"27px",children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(v.o,{options:(null===(n=f.data)||void 0===n?void 0:n.items)||[],getOptionLabel:e=>e.code,getOptionValue:e=>e.id,control:p.control,name:"marketID",label:"TH\u1eca TR\u01af\u1edcNG",required:!0,labelSx:{whiteSpace:"nowrap"}})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(v.qR,{control:p.control,name:"code",label:"M\xc3",required:!0,labelSx:{whiteSpace:"nowrap"}})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(v.qR,{control:p.control,name:"name",label:"T\xcaN",required:!0,labelSx:{whiteSpace:"nowrap"}})})]})}),(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(H.Z,{}),(0,i.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end",pt:"27px"},children:(0,i.jsx)(q.Z,{variant:"contained",loading:I.isLoading,type:"submit",disabled:!p.formState.isDirty,children:"L\u01b0u"})})]})]})]})})]})})})}),(0,i.jsx)(d.Z,{className:"mt-[36px]",children:(0,i.jsx)(ae,{brandID:h})})]})})})})})};re.title="Chi ti\u1ebft th\u01b0\u01a1ng hi\u1ec7u",re.getLayout=e=>(0,i.jsx)(f.Z,{children:e})}}]);