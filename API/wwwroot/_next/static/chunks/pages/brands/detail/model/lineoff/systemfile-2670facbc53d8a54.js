(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[593],{57021:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/brands/detail/model/lineoff/systemfile",function(){return t(96578)}])},96578:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return M}});var n=t(85893),l=t(31812),a=t(62097),s=t(61225),d=t(85214),r=t(95309),o=t(61702),c=t(29630),u=t(30120),x=(t(26993),t(64489)),h=t(91359),m=t(79072),p=t(86010),f=t(41664),g=t.n(f),y=t(11163),j=t(67294),v=t(87536),b=t(51964),I=t.n(b),Z=t(88767),C=t(46050),w=t(73762),F=t(51593),S=t(51482),T=t(37024),L=t(76429),N=t(21977),O=t(13136),Q=t(91655),q=t(65824);const D=e=>{let{systemFileCategory:i}=e;const t=(0,y.useRouter)(),l=((0,T.q)(),t.query.brandID,t.query.modelId,t.query.lineoffId),a=t.query.systemFileId,[s,d]=(0,j.useState)(null),{reset:r,control:o,watch:x,handleSubmit:h,setValue:p}=(0,v.cI)({defaultValues:{pageSize:10,pageIndex:1,searchContent:""}}),f=x(),{data:g,isLoading:b,isFetching:I}=(0,Z.useQuery)(["foldersOfParentQuery",a],(()=>a?F.xl.getAll({pageIndex:1,pageSize:100,parentID:a}):void 0),{onSuccess:e=>{console.log("foldersOfSystemDetailQuery",e)},enabled:!!a,refetchOnWindowFocus:!1}),C=(e,i)=>{p("pageIndex",i)};return(0,n.jsx)(n.Fragment,{children:b||I?(0,n.jsxs)(m.ZP,{container:!0,spacing:"27px",children:[(0,n.jsx)(m.ZP,{item:!0,sm:12,children:(0,n.jsx)(Q.Z,{variant:"rectangular",width:"100%",height:90})}),(0,n.jsx)(m.ZP,{item:!0,sm:12,children:(0,n.jsx)(Q.Z,{variant:"rectangular",width:"100%",height:90})}),(0,n.jsx)(m.ZP,{item:!0,sm:12,children:(0,n.jsx)(Q.Z,{variant:"rectangular",width:"100%",height:90})}),(0,n.jsx)(m.ZP,{item:!0,sm:12,children:(0,n.jsx)(Q.Z,{variant:"rectangular",width:"100%",height:90})})]}):(null===g||void 0===g?void 0:g.data.items.length)?(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(m.ZP,{container:!0,spacing:"27px",children:g.data.items.map(((e,t)=>{const a=e.id==s;return(0,n.jsx)(m.ZP,{item:!0,sm:12,children:(0,n.jsx)(O.MN,{handleClick:()=>{e.id==s?d(null):d(e.id)},data:e,title:e.name||"noname",isCollapsed:a,parentId:e.id,lineOffID:l,numberFiles:e.countChildFile,systemFileCategory:i})},"FolderCollapseCard-".concat(t))}))}),(0,n.jsx)(u.Z,{sx:{mt:"27px",width:"100%",display:"flex",justifyContent:"center"},children:(0,n.jsx)(q.Z,{page:f.pageIndex,sx:{"& .Mui-selected":{boxShadow:"rgb(243 133 89 / 25%) 0px 1px 4px, rgb(243 133 89 / 35%) 0px 3px 12px 2px"},"& .MuiButtonBase-root":{fontWeight:600}},onChange:C,color:"primary",count:g.data.totalPage})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.Z,{fontStyle:"italic",variant:"subtitle2",children:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u"})})})},k=e=>{let{}=e;const i=(0,y.useRouter)(),t=(0,a.Z)(),f=(0,Z.useQueryClient)(),{classes:b}=P(),C=(0,T.q)(),w=((0,T.q)(),(0,T.q)(),(0,s.Z)(t.breakpoints.down(1250))),Q=i.query.brandId,q=i.query.modelId,k=i.query.lineoffId,M=i.query.systemFileId,B=(0,v.cI)({defaultValues:{id:"",name:"",systemFileCategory:""}}),{data:H}=(B.watch(),(0,Z.useQuery)(["brandDetail",Q],(()=>Q?F.Dd.getById(Q):void 0),{enabled:!!Q,refetchOnWindowFocus:!1,staleTime:1/0})),{data:_,isFetching:W}=(0,Z.useQuery)(["lineoffDetailQuery",k],(()=>k?F.TZ.getById(k):void 0),{onSuccess:e=>{},enabled:!!k,refetchOnWindowFocus:!1}),{data:A}=(0,Z.useQuery)(["systemDetailQuery",M],(()=>M?F.xl.getById(M):void 0),{onSuccess:e=>{console.log("systemDetailQuery",e)},enabled:!!M,refetchOnWindowFocus:!1}),{data:E,isLoading:R,isFetching:z}=(0,Z.useQuery)(["foldersLineoffQuery",k],(()=>k?F.xl.getAll({pageIndex:1,pageSize:100,LineOffID:k}):void 0),{enabled:!!k,keepPreviousData:!0,refetchOnWindowFocus:!1});(0,j.useEffect)((()=>{console.log("g\u1eafn",null===A||void 0===A?void 0:A.data),(null===A||void 0===A?void 0:A.data)&&B.reset({...A.data})}),[null===A||void 0===A?void 0:A.data]);const V=(0,Z.useMutation)(F.xl.update,{onSuccess:e=>{f.invalidateQueries(["systemDetailQuery",M]),f.invalidateQueries(["foldersLineoffQuery",k]),N.dN.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng")}});return(0,n.jsxs)(u.Z,{sx:{minHeight:"calc(100vh - 300px)"},children:[(0,n.jsxs)(u.Z,{sx:{width:"100%",display:"flex",gap:w?0:"36px"},children:[(0,n.jsx)(u.Z,{sx:{width:"calc(100%)",maxWidth:w?"100%":"calc(100% - 300px)"},children:(0,n.jsx)(u.Z,{sx:{width:"100%",display:"flex"},children:(0,n.jsxs)(u.Z,{sx:{width:"100%",margin:"0 auto"},children:[(0,n.jsxs)(u.Z,{className:"flex items-center",children:[(0,n.jsx)(L.qI,{title:"Tr\u1edf l\u1ea1i",onClick1:()=>{i.push({pathname:"/brands/detail/model/lineoff",query:{brandId:Q,modelId:q,lineoffId:k}})},sx:{marginRight:"18px"},children:(0,n.jsx)(S.Ii,{})}),(0,n.jsxs)(u.Z,{sx:{flex:1},children:[(0,n.jsx)(c.Z,{variant:"largeTitle",children:null===A||void 0===A?void 0:A.data.name}),(0,n.jsx)(u.Z,{children:(0,n.jsxs)(x.Z,{maxItems:2,"aria-label":"breadcrumb",children:[(0,n.jsx)(g(),{href:"/",passHref:!0,children:"Home"}),(0,n.jsx)(g(),{href:"/brands",passHref:!0,children:"Brands"}),(0,n.jsxs)(g(),{href:"/brands/detail/?brandId=".concat(Q),passHref:!0,children:["Brand ",null===H||void 0===H?void 0:H.data.code]}),(0,n.jsxs)(g(),{href:"/brands/detail/model/?brandId=".concat(Q,"&modelId=").concat(q),passHref:!0,children:["Model ",null===_||void 0===_?void 0:_.data.eModelName]}),(0,n.jsxs)(g(),{href:"/brands/detail/model/lineoff/?brandId=".concat(Q,"&modelId=").concat(q,"&lineoffId=").concat(k),passHref:!0,children:["Line-off ",null===_||void 0===_?void 0:_.data.name]}),(0,n.jsxs)(c.Z,{color:"text.dark",children:["System file ",null===A||void 0===A?void 0:A.data.name]})]})})]})]}),(0,n.jsx)(u.Z,{sx:{py:"36px",maxWidth:"1226px",margin:"0 auto"},children:(0,n.jsx)("form",{onSubmit:B.handleSubmit((e=>{V.mutateAsync(e)}),(e=>{(0,N.lQ)(e)})),children:(0,n.jsx)(L.AX,{children:(0,n.jsx)(h.Z,{children:(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsxs)(u.Z,{className:"flex flex-col justify-between h-full",children:[(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(c.Z,{variant:"h3",sx:{opacity:.4,mb:"27px"},children:"TH\xd4NG TIN CHI TI\u1ebeT"}),(0,n.jsx)(u.Z,{children:(0,n.jsxs)(m.ZP,{container:!0,spacing:"27px",children:[(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsx)(L.qR,{label:"T\xcaN SYSTEM FILE",control:B.control,name:"name",required:!0})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsx)(u.Z,{sx:{"& .MuiRadio-root.Mui-disabled":{color:"#ef5d22",cursor:"no-drop"},"& .MuiFormControlLabel-label.Mui-disabled":{color:"rgba(84, 51, 34, 0.7)"}},children:(0,n.jsx)(L.iw,{optionsList:[{value:"1",label:"Wiring Diagram"},{value:"2",label:"Specifications"},{value:"3",label:"Timing Belt/Chain"},{value:"4",label:"Trouble Shooting Guide"},{value:"5",label:"Transmission Manual"}],label:"LO\u1ea0I T\xcdNH N\u0102NG",control:B.control,name:"systemFileCategory",disabled:!0})})})]})})]}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(u.Z,{sx:{display:"flex",justifyContent:"flex-end",pt:"27px"},children:(0,n.jsx)(l.Z,{variant:"contained",loading:V.isLoading,type:"submit",disabled:!B.formState.isDirty,children:"L\u01b0u"})})})]})})})})})}),(0,n.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:"36px"},children:[(0,n.jsx)(c.Z,{variant:"largeTitle",children:"All Folders"}),(0,n.jsx)(L.HS,{title:"T\u1ea1o folder file system",disabled:!k,handleFunction:C.onOpen})]}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(D,{systemFileCategory:(null===A||void 0===A?void 0:A.data.systemFileCategory)||""})})]})})}),(0,n.jsx)(u.Z,{sx:{position:"sticky",width:w?0:"265px",top:88,right:0,height:"calc(100vh - 373px)"},children:(0,n.jsx)(L.AX,{title:"C\xe1c folder c\u1ee7a line-off ".concat(null===_||void 0===_?void 0:_.data.name),children:(0,n.jsx)(u.Z,{children:(0,n.jsx)(I(),{style:{display:"block",overflow:"hidden",touchAction:"auto",overflowAnchor:"none",height:"calc(100vh - 373px)",position:"relative",paddingLeft:"8px",paddingRight:"8px",paddingTop:"0",paddingBottom:0},children:(0,n.jsx)(d.Z,{children:(null===E||void 0===E?void 0:E.data.items.length)?E.data.items.map(((e,t)=>{const l=e.id==M;return(0,n.jsx)(r.Z,{className:(0,p.Z)(b.listItem,{[b.listItemActive]:l}),sx:{},onClick:()=>{l||i.replace({pathname:"/brands/detail/model/lineoff/systemfile",query:{brandId:Q,modelId:q,lineoffId:k,systemFileId:e.id}})},children:(0,n.jsx)(o.Z,{primary:(0,n.jsx)(c.Z,{color:"inherit",children:e.name})})},"modelsOfBrand-".concat(t))})):null})})})})})]}),(0,n.jsx)(O.ML,{isOpen:C.isOpen,onClose:C.onClose,lineOffID:k,parentID:M,parentName:null===A||void 0===A?void 0:A.data.name,systemFileCategory:(null===A||void 0===A?void 0:A.data.systemFileCategory)||""})]})};k.title="Qu\u1ea3n l\xfd system file",k.getLayout=e=>(0,n.jsx)(w.Z,{children:e});const P=(0,C.ZL)()((e=>({listItem:{"&.MuiListItemButton-root":{"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.03)"}}," p":{transition:e.transitions.create(["padding","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})}},listItemActive:{"&.MuiListItemButton-root":{backgroundColor:e.palette.primary.light,"&:hover":{backgroundColor:e.palette.primary.light}}," p":{fontWeight:600,color:e.palette.primary.dark,paddingLeft:"12px"}},uploadViewBox:{padding:"48px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"1.6px dashed #ef5d22",borderRadius:"20px",cursor:"pointer"},dragSubtitle:{fontSize:"16px",lineHeight:"24px",fontWeight:600,color:"#000000",marginBottom:"24px"},dragNote:{marginTop:"16px",fontSize:"14px",lineHeight:"20px",letterSpacing:"0.02em",color:"#000000",opacity:.4},uploadImageIcon:{" svg":{fill:"red"},opacity:.2}})));var M=k}},function(e){e.O(0,[587,109,491,211,412,250,59,29,136,774,888,179],(function(){return i=57021,e(e.s=i);var i}));var i=e.O();_N_E=i}]);