(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{64489:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var a=n(87462),i=n(63366),l=n(67294),o=(n(59864),n(86010)),s=n(93427),r=n(67074),d=n(6446),c=n(29630),u=n(41796),h=n(58175),p=n(85893),x=(0,h.Z)((0,p.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),m=n(50522);const g=(0,r.ZP)(m.Z)((({theme:e})=>(0,a.Z)({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`},"light"===e.palette.mode?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,a.Z)({},"light"===e.palette.mode?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}),"&:active":(0,a.Z)({boxShadow:e.shadows[0]},"light"===e.palette.mode?{backgroundColor:(0,u._4)(e.palette.grey[200],.12)}:{backgroundColor:(0,u._4)(e.palette.grey[600],.12)})}))),f=(0,r.ZP)(x)({width:24,height:16});var j=function(e){const t=e;return(0,p.jsx)("li",{children:(0,p.jsx)(g,(0,a.Z)({focusRipple:!0},e,{ownerState:t,children:(0,p.jsx)(f,{ownerState:t})}))})},v=n(45154),b=n(22104);function y(e){return(0,b.Z)("MuiBreadcrumbs",e)}var Z=(0,v.Z)("MuiBreadcrumbs",["root","ol","li","separator"]);const C=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],I=(0,r.ZP)(c.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${Z.li}`]:t.li},t.root]})({}),w=(0,r.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),S=(0,r.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function k(e,t,n,a){return e.reduce(((i,l,o)=>(o<e.length-1?i=i.concat(l,(0,p.jsx)(S,{"aria-hidden":!0,className:t,ownerState:a,children:n},`separator-${o}`)):i.push(l),i)),[])}var D=l.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiBreadcrumbs"}),{children:r,className:c,component:u="nav",expandText:h="Show path",itemsAfterCollapse:x=1,itemsBeforeCollapse:m=1,maxItems:g=8,separator:f="/"}=n,v=(0,i.Z)(n,C),[b,Z]=l.useState(!1),S=(0,a.Z)({},n,{component:u,expanded:b,expandText:h,itemsAfterCollapse:x,itemsBeforeCollapse:m,maxItems:g,separator:f}),D=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},y,t)})(S),T=l.useRef(null),O=l.Children.toArray(r).filter((e=>l.isValidElement(e))).map(((e,t)=>(0,p.jsx)("li",{className:D.li,children:e},`child-${t}`)));return(0,p.jsx)(I,(0,a.Z)({ref:t,component:u,color:"text.secondary",className:(0,o.Z)(D.root,c),ownerState:S},v,{children:(0,p.jsx)(w,{className:D.ol,ref:T,ownerState:S,children:k(b||g&&O.length<=g?O:(e=>m+x>=e.length?e:[...e.slice(0,m),(0,p.jsx)(j,{"aria-label":h,onClick:()=>{Z(!0);const e=T.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-x,e.length)])(O),D.separator,f,S)})}))}))},28502:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/brands/detail/model",function(){return n(61756)}])},61756:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var a=n(85893),i=n(62097),l=n(61225),o=n(85214),s=n(95309),r=n(61702),d=n(29630),c=n(30120),u=n(79072),h=n(64489),p=n(44373),x=n(11163),m=n(87536),g=n(51964),f=n.n(g),j=n(88767),v=n(73762),b=n(46050),y=n(51482),Z=n(37024),C=n(76429),I=n(41664),w=n.n(I),S=n(51593),k=n(13136),D=n(67294),T=n(17575),O=n(26993);const P=e=>{let{dataModel:t}=e;const n=(0,x.useRouter)(),i=(0,Z.q)(),l=(0,Z.q)(),o=(0,Z.q)(),s=n.query.modelId,[r,d]=(0,D.useState)(null),[u,h]=(0,D.useState)(!1),p=(0,D.useRef)([]),{reset:g,control:f,watch:v,handleSubmit:b,setValue:y}=(0,m.cI)({defaultValues:{pageSize:10,pageIndex:1,searchContent:"",marketID:""}}),I=v(),{data:w,isLoading:P,isFetching:L}=(0,j.useQuery)(["dtcsQuery",s,I.pageIndex,I.pageSize,I.searchContent],(()=>S.j3.getAll({...I,emodelID:s})),{onSuccess:e=>{},keepPreviousData:!0,refetchOnWindowFocus:!1}),N=(0,D.useMemo)((()=>(null===w||void 0===w?void 0:w.data.items)||[]),[null===w||void 0===w?void 0:w.data]),M=(0,D.useMemo)((()=>[{Header:"M\xe3 l\u1ed7i",accessor:"dtcCode",sticky:"left"},{Header:"T\xean m\xe3 l\u1ed7i",accessor:"name"},{Header:"M\xf4 t\u1ea3",accessor:"description",Cell:e=>{let{value:t}=e;return(0,a.jsx)("p",{children:t})}}]),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.ZD,{viewProps:{title:"DTCs",secondary:(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(C.HS,{handleFunction:()=>{h(!1),o.onOpen()},title:"T\u1ea1o m\u1edbi DTC"}),(0,a.jsx)(T.Z,{title:"Import d\u1eef li\u1ec7u b\u1eb1ng file Excel",children:(0,a.jsx)(O.Z,{sx:{ml:"9px"},onClick:i.onOpen,color:"success",children:"Import Excel"})})]})},data:N,totalRows:(null===w||void 0===w?void 0:w.data.totalItem)||0,totalPage:(null===w||void 0===w?void 0:w.data.totalPage)||0,multiSelectAction:e=>(0,a.jsx)("div",{children:(0,a.jsx)(O.Z,{onClick:()=>{p.current=e,l.onOpen()},color:"error",children:"Delete"})}),tableOptions:{columns:M},onEditClick:e=>{d(e),h(!0),o.onOpen()},onRefetchQuery:()=>{},isToggleHiddenColumn:!0,tablePlugins:["globalFilter","pagination","rowSelect"],searchState:I,setNewState:e=>{g({...e,marketID:I.marketID})},isLoading:P||L}),(0,a.jsx)(k.Q7,{eModelID:s,isOpen:o.isOpen,onClose:o.onClose,isUpdate:u,dataUpdate:r}),(0,a.jsx)(k.UJ,{dataModel:t,isOpen:i.isOpen,onClose:i.onClose})]})};var L=n(80562),N=n(21977);const M=e=>{let{}=e;const t=(0,x.useRouter)(),n=(0,i.Z)(),l=(0,j.useQueryClient)(),o=(0,Z.q)(),s=(0,Z.q)(),r=t.query.brandId,d=t.query.modelId,[c,u]=(0,D.useState)(null),[h,p]=(0,D.useState)(!1),g=(0,D.useRef)([]),{reset:f,control:v,watch:b,handleSubmit:I,setValue:w}=(0,m.cI)({defaultValues:{pageSize:10,pageIndex:1,searchContent:"",marketID:""}}),P=b(),{data:M,isLoading:H,isFetching:R}=(0,j.useQuery)(["lineoffQuery",d,P.pageIndex,P.pageSize,P.searchContent],(()=>S.TZ.getAll({...P,emodelID:d})),{onSuccess:e=>{},refetchOnWindowFocus:!1,keepPreviousData:!0}),q=(0,D.useMemo)((()=>(null===M||void 0===M?void 0:M.data.items)||[]),[null===M||void 0===M?void 0:M.data]),A=(0,D.useMemo)((()=>[{Header:"N\u0103m c\u1ea5u h\xecnh g\xf3i",accessor:"year",sticky:"left",minWidth:150},{Header:"Ti\xeau \u0111\u1ec1",accessor:"name",sticky:"left"},{Header:"H\xe0nh \u0111\u1ed9ng ",accessor:"id",align:"center",minWidth:150,Cell:e=>{let{row:i}=e;return(0,a.jsx)(T.Z,{title:"\u0110i t\u1edbi chi ti\u1ebft line-off",children:(0,a.jsx)(L.Z,{sx:{" svg":{width:"20px",height:"20px"},fill:n.palette.primary.main},onClick:()=>{t.push({pathname:"/brands/detail/model/lineoff",query:{brandId:r,modelId:d,lineoffId:i.original.id}})},children:(0,a.jsx)(y.Nw,{})})})}}]),[n,t]),Q=(0,j.useMutation)((e=>Promise.all(e.map((e=>S.TZ.delete(e))))),{onSuccess:e=>{l.invalidateQueries(["lineoffQuery",d]),o.onClose(),N.dN.success("X\xf3a th\xe0nh c\xf4ng")},onError:e=>{N.dN.error(e)}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.ZD,{viewProps:{title:"Qu\u1ea3n l\xfd line-off",secondary:(0,a.jsx)(C.HS,{handleFunction:()=>{p(!1),s.onOpen()},title:"T\u1ea1o m\u1edbi line-off"})},data:q,totalRows:(null===M||void 0===M?void 0:M.data.totalItem)||0,totalPage:(null===M||void 0===M?void 0:M.data.totalPage)||0,multiSelectAction:e=>(0,a.jsx)("div",{children:(0,a.jsx)(O.Z,{onClick:()=>{g.current=e,o.onOpen()},color:"error",children:"Delete"})}),tableOptions:{columns:A},onRefetchQuery:()=>{},isToggleHiddenColumn:!0,tablePlugins:["globalFilter","pagination","rowSelect"],searchState:P,setNewState:e=>{f({...e,marketID:P.marketID})},isLoading:H||R}),(0,a.jsx)(k.H$,{eModelID:d,isOpen:s.isOpen,onClose:s.onClose,isUpdate:h,dataUpdate:c}),(0,a.jsx)(k.AN,{handleFunction:()=>{g.current&&Q.mutateAsync(g.current.map((e=>e.id)))},title:"X\xd3A D\u1eee LI\u1ec6U",content:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a c\xe1c d\xf2ng xe \u0111\xe3 ch\u1ecdn? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c \u0111\u01b0\u1ee3c",isOpen:o.isOpen,onClose:o.onClose,isLoading:Q.isLoading})]})};var H=n(31812),R=n(25675),q=n.n(R),A=n(86010);const Q=e=>{let{}=e;const t=(0,x.useRouter)(),n=(0,j.useQueryClient)(),{classes:g}=B(),v=((0,Z.q)(),(0,i.Z)()),b=(0,l.Z)(v.breakpoints.down("md")),I=(0,l.Z)(v.breakpoints.down(1250)),T=t.query.brandId,O=t.query.modelId,[L,R]=(0,D.useState)("dtc"),Q=(0,D.useCallback)((e=>{R(e)}),[]),F=(0,m.cI)({defaultValues:{id:"",brandID:"",name:"",emodelType:1,icon:""}}),_=F.watch(),{data:E}=(0,j.useQuery)(["brandDetail",T],(()=>T?S.Dd.getById(T):void 0),{enabled:!!T,refetchOnWindowFocus:!1,staleTime:1/0}),{data:W,isFetching:z}=(0,j.useQuery)(["modelDetailQuery",O],(()=>O?S.Lf.getById(O):void 0),{enabled:!!O,refetchOnWindowFocus:!1});(0,D.useEffect)((()=>{console.log(null===W||void 0===W?void 0:W.data.name),(null===W||void 0===W?void 0:W.data)&&F.reset(W.data)}),[null===W||void 0===W?void 0:W.data]);const{data:V,isLoading:X,isFetching:U}=(0,j.useQuery)(["modelsOfBrand",T],(()=>T?S.Lf.getAll({pageIndex:1,pageSize:50,brandID:T}):void 0),{enabled:!!T,refetchOnWindowFocus:!1,keepPreviousData:!0}),$=(0,j.useMutation)(S.Lf.update,{onSuccess:e=>{n.invalidateQueries(["modelDetailQuery",O]),n.invalidateQueries(["modelsOfBrand",T]),N.dN.success("C\u1eadp nh\u1eadt d\xf2ng xe th\xe0nh c\xf4ng")}}),G=(0,j.useMutation)(S.aq.upload);return(0,a.jsx)(c.Z,{children:(0,a.jsxs)(u.ZP,{container:!0,spacing:"27px",children:[(0,a.jsx)(u.ZP,{item:!0,xs:12,lg:I?12:9,children:(0,a.jsx)(c.Z,{sx:{width:"100%",display:"flex"},children:(0,a.jsxs)(c.Z,{sx:{minHeight:"calc(100vh - 300px)",width:"100%",maxWidth:"1226px",margin:"0 auto"},children:[(0,a.jsxs)(c.Z,{className:"flex items-center",children:[(0,a.jsx)(C.qI,{title:"Tr\u1edf l\u1ea1i",onClick1:()=>{t.push({pathname:"/brands/detail",query:{brandId:T}})},sx:{marginRight:"18px"},children:(0,a.jsx)(y.Ii,{})}),(0,a.jsxs)(c.Z,{sx:{flex:1},children:[(0,a.jsx)(d.Z,{variant:"largeTitle",children:null===W||void 0===W?void 0:W.data.name}),(0,a.jsx)(c.Z,{children:(0,a.jsxs)(h.Z,{maxItems:2,"aria-label":"breadcrumb",children:[(0,a.jsx)(w(),{href:"/",passHref:!0,children:"Home"}),(0,a.jsx)(w(),{href:"/brands",passHref:!0,children:"Brands"}),(0,a.jsxs)(w(),{href:"/brands/detail/?brandId=".concat(T),passHref:!0,children:["Brand ",null===E||void 0===E?void 0:E.data.code]}),(0,a.jsxs)(d.Z,{color:"text.dark",children:["Model ",null===W||void 0===W?void 0:W.data.name]})]})})]})]}),(0,a.jsx)(c.Z,{children:(0,a.jsx)(C.AX,{sx:{mt:"27px"},children:(0,a.jsx)("form",{onSubmit:F.handleSubmit((e=>{console.log(e),$.mutateAsync(e)}),(e=>{(0,N.lQ)(e)})),children:(0,a.jsx)(c.Z,{children:(0,a.jsxs)(u.ZP,{container:!0,sx:{},children:[(0,a.jsx)(u.ZP,{item:!0,xs:12,md:4,sx:{borderRight:b?"":"thin solid rgba(0, 0, 0, 0.12)",p:"27px"},children:(0,a.jsxs)(c.Z,{className:"flex flex-col items-center",sx:{height:"100%"},children:[(0,a.jsx)(c.Z,{sx:{position:"relative",width:"100%",height:"100%",minHeight:"180px"," img":{objectFit:"contain"},mb:"16px"},children:(0,a.jsx)(q(),{fill:!0,src:_.icon||"https://via.placeholder.com/150",alt:"brand-image"})}),(0,a.jsxs)("label",{htmlFor:"update_avatar",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",id:"update_avatar",style:{display:"none"},onChange:async e=>{await G.mutateAsync(e.currentTarget.files[0],{onSuccess:e=>{e&&F.setValue("icon",e.fileUrl,{shouldDirty:!0})},onError:e=>{console.log(e)}})}}),(0,a.jsx)(H.Z,{size:"large",startIcon:(0,a.jsx)(y.eD,{}),sx:{bgcolor:"#f385591a",gap:"6px",fill:v.palette.primary.dark,padding:"14px 42px",color:v.palette.primary.dark},variant:"text",component:"span",loading:G.isLoading,children:"Ch\u1ecdn \u1ea3nh"})]})]})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,md:8,sx:{p:"27px"},children:(0,a.jsxs)(c.Z,{className:"flex flex-col justify-between h-full",children:[(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(d.Z,{variant:"h3",sx:{opacity:.4,mb:"27px"},children:"TH\xd4NG TIN CHI TI\u1ebeT"}),(0,a.jsx)(c.Z,{children:(0,a.jsxs)(u.ZP,{container:!0,spacing:"27px",children:[(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(C.qR,{control:F.control,name:"name",label:"T\xcaN",required:!0,labelSx:{whiteSpace:"nowrap"}})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(C.iw,{required:!0,optionsList:[{value:1,label:"Car & Light Truck"},{value:2,label:"Heavy Truck & Heavy Equipment"}],label:"LO\u1ea0I XE",control:F.control,name:"emodelType"})})]})})]}),(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(p.Z,{}),(0,a.jsx)(c.Z,{sx:{display:"flex",justifyContent:"flex-end",pt:"27px"},children:(0,a.jsx)(H.Z,{variant:"contained",loading:$.isLoading,type:"submit",disabled:!F.formState.isDirty,children:"L\u01b0u"})})]})]})})]})})})})}),(0,a.jsx)(C.AX,{sx:{my:"36px"},headerSx:{bgcolor:"background.default",p:"18px"},title:(0,a.jsx)(k.Vm,{tabList:[{label:"DTC",value:"dtc"},{label:"Line-off",value:"lineoff"}],handleFunction:Q,valueSelected:L}),children:(0,a.jsx)(c.Z,{children:"dtc"==L?(0,a.jsx)(P,{dataModel:null===W||void 0===W?void 0:W.data}):"lineoff"==L?(0,a.jsx)(M,{}):void 0})})]})})}),(0,a.jsx)(u.ZP,{item:!0,xs:0,lg:3,sx:{height:"auto"},children:(0,a.jsx)(c.Z,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"flex-end"},children:(0,a.jsx)(c.Z,{sx:{position:"sticky",width:I?0:"100%",top:88,maxWidth:"265px",height:"calc(100vh - 373px)"},children:(0,a.jsx)(C.AX,{title:"C\xe1c model c\u1ee7a ".concat(null===E||void 0===E?void 0:E.data.code),children:(0,a.jsx)(c.Z,{children:(0,a.jsx)(f(),{style:{display:"block",overflow:"hidden",touchAction:"auto",overflowAnchor:"none",height:"calc(100vh - 373px)",position:"relative",paddingLeft:"8px",paddingRight:"8px",paddingTop:"0",paddingBottom:0},children:(0,a.jsx)(o.Z,{children:(null===V||void 0===V?void 0:V.data.items.length)?V.data.items.map(((e,n)=>{const i=e.id==O;return(0,a.jsx)(s.Z,{className:(0,A.Z)(g.listItem,{[g.listItemActive]:i}),sx:{},onClick:()=>{i||t.replace({pathname:"/brands/detail/model",query:{brandId:T,modelId:e.id}})},children:(0,a.jsx)(r.Z,{primary:(0,a.jsx)(d.Z,{color:"inherit",children:e.name})})},"modelsOfBrand-".concat(n))})):null})})})})})})})]})})};Q.title="Qu\u1ea3n l\xfd d\xf2ng xe",Q.getLayout=e=>(0,a.jsx)(v.Z,{children:e});const B=(0,b.ZL)()((e=>({listItem:{"&.MuiListItemButton-root":{"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.03)"}}," p":{transition:e.transitions.create(["padding","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})}},listItemActive:{"&.MuiListItemButton-root":{backgroundColor:e.palette.primary.light,"&:hover":{backgroundColor:e.palette.primary.light}}," p":{fontWeight:600,color:e.palette.primary.dark,paddingLeft:"12px"}}})));var F=Q}},function(e){e.O(0,[587,109,491,211,412,59,29,136,774,888,179],(function(){return t=28502,e(e.s=t);var t}));var t=e.O();_N_E=t}]);