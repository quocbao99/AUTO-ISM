(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{7848:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reportPaymentStatus",function(){return n(8665)}])},8665:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(85893),r=n(62097),i=n(26993),a=n(30120),l=n(29630),o=n(88767),c=n(73762),u=n(76429),d=n(67294),h=n(87536),p=n(11163),g=n(51593),x=n(37024),j=n(13136),m=n(21977),v=n(27484),S=n.n(v);const f=e=>{let{}=e;(0,r.Z)(),(0,p.useRouter)();const t=(0,o.useQueryClient)(),n=((0,x.q)(),(0,x.q)()),c=(0,x.q)(),[v,f]=(0,d.useState)(null),[y,b]=(0,d.useState)([]),w=(0,d.useRef)([]),C=(0,d.useRef)(null),T=(0,h.cI)({defaultValues:{pageSize:10,pageIndex:1,searchContent:""}}),F=T.watch(),M=e=>{T.reset({...e})},{data:N,isLoading:_}=(0,o.useQuery)(["reportPaymentStatusQuery",F.pageIndex,F.pageSize,F.searchContent],(()=>g.Yw.getAll({...F})),{onSuccess:e=>{console.log("res",null===e||void 0===e?void 0:e.data.items)},refetchOnWindowFocus:!1}),H=(0,d.useMemo)((()=>(null===N||void 0===N?void 0:N.data.items)||[]),[null===N||void 0===N?void 0:N.data]),O=(0,d.useCallback)((e=>{e.isTrial&&(n.onOpen(),f(e))}),[]),P=(0,o.useMutation)(g.BG.update,{onSuccess:()=>{t.invalidateQueries("customers"),m.dN.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),n.onClose()}}),k=e=>{if(4==e.paymentMethodCode)switch(e.status){case 1:return(0,s.jsxs)("p",{children:[e.status," - \u0110ang ch\u1edd"]});case 2:return(0,s.jsxs)("p",{children:[e.status," - Th\xe0nh c\xf4ng"]});case 3:return(0,s.jsxs)("p",{children:[e.status," - Th\u1ea5t b\u1ea1i"]});case 0:return(0,s.jsx)("p",{children:e.status})}else switch(e.statusForSubScription){case 1:return(0,s.jsxs)("p",{children:[e.statusForSubScription," - \u0110ang ch\u1edd"]});case 2:return(0,s.jsxs)("p",{children:[e.statusForSubScription," - Th\xe0nh c\xf4ng"]});case 3:return(0,s.jsxs)("p",{children:[e.statusForSubScription," - Th\u1ea5t b\u1ea1i"]});case 0:return(0,s.jsx)("p",{children:e.statusForSubScription})}},E=(0,d.useMemo)((()=>[{Header:"EMAIL",accessor:"userModel.email"},{Header:"PHONE",accessor:"userModel.phone"},{Header:"Money",accessor:"amountMoney",align:"right",Cell:e=>{let{value:t}=e;return(0,s.jsx)("p",{children:(0,m.x6)(t)})},Filter:()=>null},{Header:"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n",accessor:"paymentMethodName",Filter:()=>null},{Header:"Tr\u1ea1ng th\xe1i",accessor:"statusForSubScription",Filter:()=>null,Cell:e=>{let{row:t}=e;return(0,s.jsx)("p",{children:k(t.original)})}},{Header:"Ng\xe0y ph\xe1t sinh",accessor:"created",Filter:()=>null,Cell:e=>{let{value:t}=e;return(0,s.jsx)("p",{children:S()(1e3*t).format("DD MMMM YYYY")})}}]),[O]);return(0,s.jsxs)(a.Z,{ref:C,children:[(0,s.jsxs)(h.RV,{...T,children:[(0,s.jsx)("div",{className:"mb-[36px] flex justify-between items-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Z,{variant:"largeTitle",children:"B\xe1o c\xe1o t\xecnh tr\u1ea1ng thanh to\xe1n"}),(0,s.jsx)(l.Z,{children:"T\u1ea5t c\u1ea3 th\xf4ng tin li\xean quan \u0111\u1ebfn l\u1ecbch s\u1eed v\xe0 t\xecnh tr\u1ea1ng thanh to\xe1n c\u1ee7a kh\xe1ch h\xe0ng \u0111\u01b0\u1ee3c qu\u1ea3n l\xfd t\u1eeb trang n\xe0y"})]})}),(0,s.jsx)(u.h2,{in:!0,type:"slide",direction:"left",timeout:2e3,container:C.current,children:(0,s.jsx)(u.ZD,{viewProps:{},data:H,totalRows:(null===N||void 0===N?void 0:N.data.totalItem)||0,totalPage:(null===N||void 0===N?void 0:N.data.totalPage)||0,multiSelectAction:e=>(0,s.jsx)("div",{children:(0,s.jsx)(i.Z,{onClick:()=>{w.current=e,c.onOpen()},color:"error",children:"Delete"})}),tableOptions:{columns:E},onRefetchQuery:()=>{},isToggleHiddenColumn:!0,tablePlugins:["globalFilter","pagination"],searchState:F,setNewState:M,isLoading:_})})]}),(0,s.jsx)(j.AN,{handleFunction:()=>{v&&P.mutateAsync({id:v.id,isTrial:!1})},title:"T\u1eaeT D\xd9NG TH\u1eec T\xc0I KHO\u1ea2N",content:(0,s.jsxs)(s.Fragment,{children:["B\u1ea1n c\xf3 mu\u1ed1n t\u1eaft d\xf9ng th\u1eed t\xe0i kho\u1ea3n \u0111\u01b0\u1ee3c ch\u1ecdn c\xf3 email: ",(0,s.jsx)("span",{style:{color:"#ef5d22"},children:null===v||void 0===v?void 0:v.email})]}),isOpen:n.isOpen,onClose:n.onClose})]})};f.title="B\xe1o c\xe1o t\xecnh tr\u1ea1ng thanh to\xe1n",f.getLayout=e=>(0,s.jsx)(c.Z,{children:e});var y=f}},function(e){e.O(0,[587,109,491,211,412,59,29,136,774,888,179],(function(){return t=7848,e(e.s=t);var t}));var t=e.O();_N_E=t}]);